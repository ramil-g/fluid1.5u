var fluid_1_5=fluid_1_5||{};(function($,fluid){fluid.defaults("fluid.uiOptions.inline",{gradeNames:["fluid.viewComponent","autoInit"],components:{uiOptionsLoader:{type:"fluid.uiOptions.loader"},templateLoader:{priority:"first",type:"fluid.uiOptions.templateLoader"}},container:"{that}.container",distributeOptions:[{source:"{that}.options.templateLoader.options",removeSource:true,target:"{that templateLoader}.options"},{source:"{that}.options.prefix",target:"{that templatePath}.options.value"},{source:"{that}.options.uiOptionsLoader.options",removeSource:true,target:"{that > uiOptionsLoader}.options"},{source:"{that}.options.uiOptions.options",removeSource:true,target:"{that uiOptions}.options"},{source:"{that}.options.container",removeSource:true,target:"{that > uiOptionsLoader}.container"}]});fluid.defaults("fluid.uiOptions.transformDefaultPanelsOptions",{gradeNames:["fluid.uiOptions.inline","autoInit"],distributeOptions:[{source:"{that}.options.textSize.options",removeSource:true,target:"{that textSize}.options"},{source:"{that}.options.lineSpace.options",removeSource:true,target:"{that lineSpace}.options"},{source:"{that}.options.textFont.options",removeSource:true,target:"{that textFont}.options"},{source:"{that}.options.contrast.options",removeSource:true,target:"{that contrast}.options"},{source:"{that}.options.layoutControls.options",removeSource:true,target:"{that layoutControls}.options"},{source:"{that}.options.linksControls.options",removeSource:true,target:"{that linksControls}.options"}]});fluid.defaults("fluid.uiOptions.templateLoader",{gradeNames:["fluid.eventedComponent","autoInit"],finalInitFunction:"fluid.uiOptions.templateLoader.resolveTemplates",templates:{uiOptions:"%prefix/FatPanelUIOptions.html"},components:{templatePath:{type:"fluid.uiOptions.templatePath"}},invokers:{transformURL:{funcName:"fluid.stringTemplate",args:["{arguments}.0",{"prefix/":"{templateLoader}.templatePath.options.value"}]}}});fluid.uiOptions.templateLoader.resolveTemplates=function(that){var mapped=fluid.transform(that.options.templates,that.transformURL);that.resources=fluid.transform(mapped,function(url){return{url:url,forceCache:true}})};fluid.defaults("fluid.uiOptions.templatePath",{gradeNames:["fluid.littleComponent","autoInit"],value:"../html/"});fluid.defaults("fluid.uiOptions.loader",{gradeNames:["fluid.viewComponent","autoInit"],resources:"{templateLoader}.resources",events:{onUIOptionsTemplateReady:null,onUIOptionsComponentReady:null,onReady:null},listeners:{onUIOptionsComponentReady:{listener:"{loader}.events.onReady",args:["{fluid.uiOptions.loader}","{arguments}.0"],priority:"last"},onCreate:{listener:"fluid.uiOptions.loader.init",args:"{that}"}},components:{uiOptions:{type:"fluid.uiOptions",container:"{loader}.container",createOnEvent:"onUIOptionsTemplateReady",options:{events:{onUIOptionsComponentReady:"{loader}.events.onUIOptionsComponentReady"}}}}});fluid.uiOptions.loader.init=function(that){fluid.fetchResources(that.options.resources,function(){that.events.onUIOptionsTemplateReady.fire()})};fluid.defaults("fluid.uiOptions",{gradeNames:["fluid.viewComponent","fluid.uiOptions.settingsGetter","fluid.uiOptions.settingsSetter","fluid.uiOptions.rootModel","autoInit"],components:{eventBinder:{type:"fluid.uiOptions.eventBinder"}},invokers:{updateModel:{funcName:"fluid.fireSourcedChange",args:["{that}.applier","selections","{arguments}.0","{arguments}.1"]}},selectors:{cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{onSave:null,onCancel:null,onReset:null,onAutoSave:null,modelChanged:null,onUIOptionsRefresh:null,onUIOptionsMarkupReady:null,onUIOptionsComponentReady:null},listeners:{onAutoSave:"{that}.save"},resources:{template:"{templateLoader}.resources.uiOptions"},autoSave:false});fluid.defaults("fluid.uiOptions.settingsGetter",{gradeNames:["fluid.littleComponent","autoInit"],members:{getSettings:"{settingsStore}.get"}});fluid.defaults("fluid.uiOptions.settingsSetter",{gradeNames:["fluid.littleComponent","autoInit"],invokers:{setSettings:{funcName:"fluid.uiOptions.settingsSetter.setSettings",args:["{arguments}.0","{settingsStore}.set"]}}});fluid.uiOptions.settingsSetter.setSettings=function(model,set){var userSettings=fluid.copy(model);set(userSettings)};fluid.defaults("fluid.uiOptions.rootModel",{gradeNames:["fluid.littleComponent","autoInit"],members:{rootModel:{}}});fluid.defaults("fluid.uiOptions.rootModel.starter",{gradeNames:["fluid.uiOptions.rootModel","autoInit"],members:{rootModel:{textFont:"default",theme:"default",textSize:1,lineSpace:1,toc:false,links:false,inputsLarger:false}}});fluid.defaults("fluid.uiOptions.uiEnhancerRelay",{gradeNames:["autoInit","fluid.eventedComponent"],listeners:{onCreate:"{that}.addListener",onDestroy:"{that}.removeListener"},events:{updateEnhancerModel:"{fluid.uiOptions}.events.onUIOptionsRefresh"},invokers:{addListener:{funcName:"fluid.uiOptions.uiEnhancerRelay.addListener",args:["{that}.events.updateEnhancerModel","{that}.updateEnhancerModel"]},removeListener:{funcName:"fluid.uiOptions.uiEnhancerRelay.removeListener",args:["{that}.events.updateEnhancerModel","{that}.updateEnhancerModel"]},updateEnhancerModel:{funcName:"fluid.uiOptions.uiEnhancerRelay.updateEnhancerModel",args:["{uiEnhancer}","{fluid.uiOptions}.model.selections"]}}});fluid.uiOptions.uiEnhancerRelay.addListener=function(modelChanged,listener){modelChanged.addListener(listener)};fluid.uiOptions.uiEnhancerRelay.removeListener=function(modelChanged,listener){modelChanged.removeListener(listener)};fluid.uiOptions.uiEnhancerRelay.updateEnhancerModel=function(uiEnhancer,newModel){uiEnhancer.updateModel(newModel)};fluid.uiOptions.finishInit=function(that){var bindHandlers=function(that){var saveButton=that.locate("save");if(saveButton.length>0){saveButton.click(that.saveAndApply);var form=fluid.findForm(saveButton);$(form).submit(function(){that.saveAndApply()})}that.locate("reset").click(that.reset);that.locate("cancel").click(that.cancel)};that.container.append(that.options.resources.template.resourceText);bindHandlers(that);that.events.onUIOptionsMarkupReady.fire(that);that.fetch();that.events.onUIOptionsComponentReady.fire(that)};fluid.uiOptions.preInit=function(that){that.fetch=function(){var completeModel=that.getSettings();completeModel=$.extend(true,{},that.rootModel,completeModel);that.updateModel(completeModel,"settingsStore");that.events.onUIOptionsRefresh.fire()};that.save=function(){that.events.onSave.fire(that.model.selections);var savedSelections=fluid.copy(that.model.selections);that.setSettings(savedSelections)};that.saveAndApply=function(){that.save();that.events.onUIOptionsRefresh.fire()};that.reset=function(){that.updateModel(fluid.copy(that.rootModel));that.events.onReset.fire(that);that.events.onUIOptionsRefresh.fire()};that.cancel=function(){that.events.onCancel.fire();that.fetch()};that.applier.modelChanged.addListener("selections",function(newModel,oldModel,changeRequest){that.events.modelChanged.fire(newModel,oldModel,changeRequest[0].source);if(that.options.autoSave){that.events.onAutoSave.fire()}})};fluid.uiOptions.finalInit=function(that){fluid.fetchResources(that.options.resources,function(){setTimeout(function(){fluid.uiOptions.finishInit(that)},1)})};fluid.defaults("fluid.uiOptions.panels",{gradeNames:["fluid.rendererComponent","fluid.uiOptions.modelRelay","autoInit"],invokers:{refreshView:"{that}.renderer.refreshView"},strings:{},parentBundle:"{uioMsgBundle}"});fluid.defaults("fluid.uiOptions.eventBinder",{gradeNames:["fluid.eventedComponent","autoInit"]});fluid.defaults("fluid.uiOptions.preview",{gradeNames:["fluid.viewComponent","autoInit"],components:{enhancer:{type:"fluid.uiEnhancer",container:"{preview}.enhancerContainer",createOnEvent:"onReady",options:{gradeNames:["fluid.uiOptions.uiEnhancerRelay"]}},templateLoader:"{templateLoader}"},invokers:{updateModel:{funcName:"fluid.uiOptions.preview.updateModel",args:["{preview}","{uiOptions}.model.selections"]}},finalInitFunction:"fluid.uiOptions.preview.finalInit",events:{onReady:null},listeners:{"{uiOptions}.events.modelChanged":"{that}.updateModel",onReady:"{that}.updateModel"},templateUrl:"%prefix/UIOptionsPreview.html"});fluid.uiOptions.preview.updateModel=function(that,selections){setTimeout(function(){if(that.enhancer){that.enhancer.updateModel(selections)}},0)};fluid.uiOptions.preview.finalInit=function(that){var templateUrl=that.templateLoader.transformURL(that.options.templateUrl);that.container.load(function(){that.enhancerContainer=$("body",that.container.contents());that.events.onReady.fire()});that.container.attr("src",templateUrl)}})(jQuery,fluid_1_5);